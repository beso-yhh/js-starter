{
  "version": 3,
  "sources": ["../bin/live-reload.js", "../node_modules/.pnpm/@finsweet+ts-utils@0.40.0/node_modules/@finsweet/ts-utils/dist/webflow/getPublishDate.js", "../src/utils/greet.ts", "../src/index.ts"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\n", "/**\n * Extracts the publish date of a Webflow site\n * @returns A Date object, if found.\n * @param page The page to get the publish date from. Defaults to the current page.\n */\nexport const getPublishDate = (page = document) => {\n    const publishDatePrefix = 'Last Published:';\n    for (const node of page.childNodes) {\n        if (node.nodeType === Node.COMMENT_NODE && node.textContent?.includes(publishDatePrefix)) {\n            const publishDateValue = node.textContent.trim().split(publishDatePrefix)[1];\n            if (publishDateValue)\n                return new Date(publishDateValue);\n        }\n    }\n};\n", "import { getPublishDate } from '@finsweet/ts-utils';\n\n/**\n * Greets the user by printing a message in the console.\n * @param name The user's name.\n */\nexport const greetUser = (name: string) => {\n  const publishDate = getPublishDate();\n\n  console.log(`Hello ${name}!`);\n  console.log(\n    `This site was last published on ${publishDate?.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: '2-digit',\n    })}.`\n  );\n};\n", "import { greetUser } from '$utils/greet';\n\nimport type { Collection, CollectionProduct, Product } from './cms/populate-external-data/types';\nimport type { CMSList } from './types/CMSList';\n\nwindow.Webflow ||= [];\nwindow.Webflow.push(async () => {\n  const name = 'John Do wewewewe';\n  greetUser(name);\n  // document.body.style.backgroundColor = 'blue';\n});\n\n/**\n * Populate CMS Data from an external API.\n */\n\n/**\n    1. Get Collection Products by Collection Id\n    2. Get Collections\n    3. Matching Collection Id with which one is belong to, for changing the header and description \n    4. Remove the Loader.\n */\nif (document.currentScript?.baseURI.toString().includes('category-details')) {\n  console.log('document.currentScript?.baseURI = ' + document.currentScript?.baseURI);\n  window.fsAttributes = window.fsAttributes || [];\n  window.fsAttributes.push([\n    'cmsload',\n    async (listInstances: CMSList[]) => {\n      console.log(`Hello from the CMS`);\n\n      // Get the list instance\n      //const [listInstance] = listInstances;\n      const listInstance =\n        listInstances.find(({ wrapper }) => wrapper.id === 'products-cms-id') ?? listInstances[0];\n\n      // Save a copy of the template\n      const [firstItem] = listInstance.items;\n      const itemTemplateElement = firstItem.element;\n\n      const collectionProducts = await fetchCollectionProducts(277396226115);\n\n      // Fetch external data\n      const products = await fetchProducts();\n\n      // Remove existing items\n      listInstance.clearItems();\n\n      // Create the new items\n      await products.map(async (product) => {\n        itemTemplateElement.id = product.id + '#becaby';\n        const item = createItem(product, itemTemplateElement);\n        await listInstance.addItems([item]);\n        document.getElementById(`${product.id}#becaby`)?.addEventListener('click', function () {\n          window.open(`https://becapy-new.webflow.io/product/${product.title}`, '_self');\n        });\n      });\n      // Populate the list\n      const collectionInstance =\n        listInstances.find(({ wrapper }) => wrapper.id === 'categories-cms-id') ?? listInstances[0];\n      const collections = await getCustomCategories();\n      console.log('collections[0].title = ' + collections[0].title);\n      const [firstCollectioItem] = collectionInstance.items;\n      const collectionItemTemplateElement = firstCollectioItem.element;\n      // Remove existing items\n      collectionInstance.clearItems();\n\n      // Create the new items\n      await collections.map(async (collection) => {\n        collectionItemTemplateElement.id = collection.id + '#becaby';\n        const item = createCollectionItem(collection, collectionItemTemplateElement);\n        await collectionInstance.addItems([item]);\n        document.getElementById(`${collection.id}#becaby`)?.addEventListener('click', function () {\n          window.open(\n            `https://becapy-new.webflow.io/category-details?collection=${collection.id}`,\n            '_self'\n          );\n        });\n      });\n    },\n  ]);\n}\n\n/**\n * Fetches fake products from Fake Store API.\n * @returns An array of {@link Product}.\n */\nconst fetchProducts = async (): Promise<Product[]> => {\n  try {\n    const response = await fetch('https://fakestoreapi.com/products');\n    const data: Product[] = await response.json();\n\n    return data;\n  } catch (error) {\n    return [];\n  }\n};\n\nconst fetchCollectionProducts = async (collectionId: number): Promise<CollectionProduct[]> => {\n  try {\n    const response = await fetch(\n      `https://getproductsbycollectionidhttps-dkhndz7lcq-uc.a.run.app/?collectionId=${collectionId}`\n    );\n    const data: CollectionProduct[] = await response.json();\n\n    return data;\n  } catch (error) {\n    return [];\n  }\n};\n\n/**\n * Creates an item from the template element.\n * @param product The product data to create the item from.\n * @param templateElement The template element.\n *\n * @returns A new Collection Item element.\n */\nconst createItem = (product: Product, templateElement: HTMLDivElement) => {\n  // Clone the template element\n  const newItem = templateElement.cloneNode(true) as HTMLDivElement;\n\n  // Query inner elements\n  const image = newItem.querySelector<HTMLImageElement>('[data-element=\"image\"]');\n  const title = newItem.querySelector<HTMLHeadingElement>('[data-element=\"title\"]');\n  const category = newItem.querySelector<HTMLParagraphElement>('[data-element=\"category\"]');\n  const description = newItem.querySelector<HTMLParagraphElement>('[data-element=\"description\"]');\n  const price = newItem.querySelector<HTMLParagraphElement>('[data-element=\"price\"]');\n\n  // Populate inner elements\n  if (image) image.src = product.image;\n  if (title) title.textContent = product.title;\n  if (category) category.textContent = product.category;\n  if (description) description.textContent = product.description;\n  if (price) price.textContent = '$ ' + product.price + ' USD';\n\n  return newItem;\n};\n\nconst createCollectionItem = (collection: Collection, templateElement: HTMLDivElement) => {\n  // Clone the template element\n  const newItem = templateElement.cloneNode(true) as HTMLDivElement;\n\n  // Query inner elements\n  const title = newItem.querySelector<HTMLImageElement>('[data-element=\"collection_title\"]');\n\n  // Populate inner elements\n  if (title) title.textContent = collection.title;\n\n  return newItem;\n};\n\nfunction getSyncScriptParams() {\n  console.log('document.currentScript = ' + document.currentScript?.baseURI);\n  const name = document.getElementById('helper')?.getAttribute('current_collection');\n  console.log('name = ' + name);\n  if (document.currentScript?.baseURI.toString().includes('category-details')) {\n    console.log('TTT');\n    isCollection = true;\n  }\n}\n\nconst getCustomCategories = async (): Promise<Collection[]> => {\n  try {\n    let data: Collection[] = [];\n    await fetch('https://getcustomcollections-dkhndz7lcq-uc.a.run.app').then(async (result) => {\n      data = (await result.json())['custom_collections'];\n      console.log(data[0].id);\n      return data;\n    });\n\n    return data;\n  } catch (error) {\n    return [];\n  }\n};\n"],
  "mappings": "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",
  "names": []
}
